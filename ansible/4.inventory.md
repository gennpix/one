# Inventory

默认位置: `/etc/ansible/hosts`

## inventory 文件格式

支持`INI`和`YAML`格式。

```ini
[testnodes]
192.168.31.5
192.168.31.6
192.168.31.7
```

```yaml
testnodes:
    hosts:
        testnode01:
            ansible_host: 192.168.31.5
        testnode02:
            ansible_host: 192.168.31.6
        testnode03:
            ansible_host: 192.168.31.7
```

## 检查/验证 inventory 文件

`ansible-inventory -i inventory.yaml --list`

## 使用 ping 测试托管主机

`ansible testnodes -m ping -i inventory.yaml`

host: IP address 或 fully qualified domain name (FQDN)


更多配置(指定端口--默认22， 指定ssh 用户--默认root， 指定python--建议python3)：

```ini
192.168.31.5 ansible_port=8001 ansible_user=ansible ansible_python_interpreter=/usr/bin/python3
192.168.31.6 ansible_python_interpreter=/usr/bin/python3
192.168.31.7 ansible_python_interpreter=/usr/bin/python3
```

如果 -i 指定的是目录，则查找hosts文件，也可指定具体的文件路径，ansible 会自动处理重复的主机名/IP，以最后一行配置为准。
指定 inventory `ansible -i /ansible/inventory/path all --list-hosts`

1. 指定inventory `ansible -i /ansible/inventory/path all -m ping`
2. 默认需要配置ssh免密，如需动态输入密码，使用 -k: `ansible all -m ping -k`